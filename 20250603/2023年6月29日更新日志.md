  * [](/)
  * 更新日志
  * 2023年更新日志汇总
  * 2023年6月29日更新日志

复制链接

本页总览

# 2023年6月29日更新日志

## 史诗级更新[​](/Manual/NewPathNote/2023PathNote/2023-06-29#史诗级更新 "史诗级更新的直接链接")

## 触发编辑器支持撤销重做了！[]~~(￣▽￣)~~
*[​](/Manual/NewPathNote/2023PathNote/2023-06-29#触发编辑器支持撤销重做了
"触发编辑器支持撤销重做了的直接链接")

### 回合制逻辑支持[​](/Manual/NewPathNote/2023PathNote/2023-06-29#回合制逻辑支持
"回合制逻辑支持的直接链接")

  * 为了增加星火编辑器的功能广度，我们为回合制游戏增加了一些逻辑支持。用户现在可以通过进入回合制模式和退出回合制模式来令游戏进入一种特殊的模式。
  * 用户需要指定哪些单位会进入回合制模式，若不指定则视为玩家1的主控单位所在场景中所有的单位都会进入该模式。
  * 处于回合制模式中的所有单位的技能冷却、Buff时间以及生命、魔力自动回复不会随时间变化，而是会随着“回合”推进。
  * 在回合制模式下，用户可以使用该模式下特有的“推进回合”触发器动作来令游戏推进一个回合。每推进一个回合，处于该模式下所有单位的技能冷却以及Buff时间都会推进1秒，生命与魔力也会一次性恢复对应属性1秒内该回复的值。（也即是说，在数据编辑器中所配置的技能冷却时间和Buff持续时间的秒数就等于它们在回合制模式下所持续的回合数，向上取整。而生命与魔法恢复速度属性则会令单位在每回合开始时恢复对应的数值）
  * 我们今后会给出更多相关样例和教程。

### 星火编辑器 x AIGC[​](/Manual/NewPathNote/2023PathNote/2023-06-29#星火编辑器-x-aigc
"星火编辑器 x AIGC的直接链接")

星火编辑器迭代和演进的核心原则是：一切以提升创作者生产力为核心目标。

虽然AIGC的话题最近已经有些过气了，但是AIGC的能力对游戏创作者来说依然是有巨大的价值和潜力的，所以虽然来的晚了一些，但是我们会逐步将AIGC合适的能力在星火编辑器中落地。

本次更新大家会注意到有些星火编辑器的模型已经附上了一些可用立绘，我们会持续更新立绘的覆盖范围，确保所有的角色模型都有可用的立绘和头像。

大家可能也看到了目前仍处于置灰状态的『生成新的立绘』按钮，我们会逐渐将此功能向『累计生态贡献度』较高的开发者开放，经过充分测试后向所有开发者开放，但是要注意的是如果想要拥有更多的每月生成额度，需要拥有一定的『累计生态贡献度』，所以欢迎大家继续写案例做教程，参与到星火编辑器开发者社区生态的建设中~

关于星火编辑器生态贡献度，可以参考【[如下链接](https://www.taptap.cn/moment/397504686459978719)】

![AI生成立绘](https://doc.sce.xd.com/assets/images/AI生成立绘-f37f3984301eea1832c12382582fe773.webp)

###
帐号绑定装备及云变量货币消耗品[​](/Manual/NewPathNote/2023PathNote/2023-06-29#帐号绑定装备及云变量货币消耗品
"帐号绑定装�备及云变量货币消耗品的直接链接")

我们的物品系统增加了两种云变量相关的概念：帐号绑定装备和云变量货币消耗品。

在数据编辑器中，用户可以将物品指定以上两种云变量物品中的一种。

#### 帐号绑定装备：[​](/Manual/NewPathNote/2023PathNote/2023-06-29#帐号绑定装备
"帐号绑定装备：的直接链接")

  * 在创建装备后可以通过触发器将该物品与特定的玩家帐号绑定或解绑。
  * 可通过特定的云变量触发器来保存和还原与指定玩家绑定的所有帐号绑定装备。（见下面的教程）
  * 每个账号绑定物品拥有唯一识别Id，单次还原操作无法还原出一个以上的同物品。此外，还原操作可以设置是否检测游戏里是否已经存在了同物品。
  * 当一个帐号绑定装备改变所属帐号时，原有用户将无法通过还原指令来还原出这一物品。
  * 正确使用帐号绑定装备可以解决多数情况下利用网络延迟而导致的装备复制漏洞。

#### 云变量货币消耗品：[​](/Manual/NewPathNote/2023PathNote/2023-06-29#云变量货币消耗品
"云变量货币消耗品：的直接链接")

  * 必须为拥有叠加次数的物品。
  * 这些物品可以配置与它们对应的云变量货币，这些物品叠加次数将与对应的云变量货币数值直接绑定。
  * 如果该物品是可主动使用的物品（绑定有物品技能），则每次使用该物品时，会先将物品对应的云变量扣除1个单位，然后才会开始执行物品技能的效果。如果云变量货币扣除失败，物品技能将会施展失败。
  * 注意：在网络延迟较高的情况下，这一配置会使玩家需要等待许久才能使出物品效果，请仅对必要的物品进行这一配置。
  * 即使物品没有主动技能，用户也可以通过触发器来“消耗”这些物品，这样的操作也会消耗对应的云变量货币，若操作会令云变量货币变为负数，则对应的操作将会失败。
  * 这些货币物品也可以通过触发器来还原，但还原时的堆叠次数会视云变量货币的值而定。
  * 云变量物品的交互非常丰富，详细操作方式请参考我们的官方教程【[教程链接](https://doc.sce.xd.com/%E5%8A%9F%E8%83%BD%E6%89%8B%E5%86%8C/%E8%A7%A6%E5%8F%91%E7%BC%96%E8%BE%91%E5%99%A8/%E6%96%B0%E7%89%88%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88V2%EF%BC%89/%E4%BB%A5%E6%A8%A1%E5%9D%97%E5%88%92%E5%88%86%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8%E6%A1%88%E4%BE%8B/%E4%BA%91%E5%8F%98%E9%87%8F%E7%89%A9%E5%93%81%E7%9B%B8%E5%85%B3/%E9%85%8D%E7%BD%AE%E4%BA%91%E5%8F%98%E9%87%8F%E7%89%A9%E5%93%81)】
  * 我们今后会对云变量物品增加更多的支持。

### Buff显示列表控件[​](/Manual/NewPathNote/2023PathNote/2023-06-29#buff显示列表控件
"Buff显示列表控件的直接链接")

我们在界面编辑器中增加了显示单位身上Buff列表的控件，该控件能以列表的方式显示指定单位身上的Buff。默认情况下，该控件显示的是客户端主控单位身上的Buff列表。也可以修改该控件的单位属性来改变它对应的单位。

在数据编辑器中的Buff数据也获得了更多配置字段，用以控制它们在Buff列表中的显示方式：

  * 是否显示
  * 是否显示持续时间（若显示则以冷却的方式显示）
  * 是否显示叠加层数
  * 是否在即将消失时闪烁（即将消失指持续时间变为2秒以下时，本身若总时间小于2秒则永远不会闪烁）
  * 是否多个实例合并显示（合并的话CD显示最长持续时间，并且把叠加层数加起来）
  * Buff的极性: 正面/负面/无极性

用户将可在界面编辑器中设置Buff显示列表控件的布局，此外，还可设置Buff显示列表的以下配置：

  * Buff分类过滤：符合该字段的Buff分类才会显示在这个控件中，为空全部显示。
  * Buff极性：可勾选正面/负面/无，只有符合被勾上极性的Buff才会显示在列表中。
  * 排序函数：可以设置Buff显示列表控件的中各个Buff的显示顺序。
  * Buff图标模版：可以指定一个Buff图标控件来作为填充其列表的模板。 此外，用户还能设置一些预览参数来直接在界面编辑器里预览Buff显示列表控件的填充结果。

我们还在界面编辑器中加入了Buff图标控件。Buff显示列表控件用于填充Buff图标的子控件正是Buff图标控件，但Buff图标控件也可单独拿出来用于显示一个单独的Buff。用户可以设置控件的Buff属性来令Buff图标控件显示一个特定Buff，也可以由Buff显示列表控件来控制它的下属控件所显示的Buff。图标控件可以进行以下的配置：

  * 正面极性外框颜色
  * 负面极性外框颜色
  * 无极性外框颜色
  * 正面极性冷却序列帧
  * 负面极性冷却序列帧
  * 无极性冷却序列帧
  * 预览用图标

###
玩家同时进入多局游戏的自定义逻辑处理[​](/Manual/NewPathNote/2023PathNote/2023-06-29#玩家同时进入多局游戏的自定义逻辑处理
"玩家同时进入多局游戏的自定义逻辑处理的直接链接")

为了解决一些多局游戏同时操作账号导致的问题，当一个玩家在一局游戏的中途加入到另一局新游戏时，我们会将该玩家从原有的游戏局中踢出。

但是在玩家因为这些原因而被从原游戏局中强制退出前，用户可能想要进行一些自定义的清理处理。

现在，在数据编辑器中的 **默认游戏机制**
设置表中，可以看到一个『新游戏局断线前』处理字段。用户可以在这里获得因为加入了另一个游戏局而即将被强制退出的玩家及其虚拟用户Id。并可添加自定义的触发器逻辑对其进行处理。

该字段允许累加排列多个处理逻辑，方便不同的预制功能库对这一事件分别进行处理。

服务器会从上到下地按顺序处理完此处所有的自定义逻辑，然后才会清退对应的玩家，并允许该玩家加入新的游戏局。

与普通的数编公式不同的时。在这里用户可以使用等待X秒的触发器动作，还可以进行云变量操作。

### 界面编辑器[​](/Manual/NewPathNote/2023PathNote/2023-06-29#界面编辑器 "界面编辑器的直接链接")

界面编辑器的属性面板进行了改动，现在属性与事件分成了两个分页。并且调整了『显示高级属性』的操作方式，与数据编辑器的交互方式进行了对齐。

### 数据编辑器[​](/Manual/NewPathNote/2023PathNote/2023-06-29#数据编辑器 "数据编辑器的直接链接")

  * 现在选中一个数据编辑器中的数据节点后，它的相关数据连线会高亮加粗显示。
  * 由于在单位目标技能中错误地配置了发射投射物效果的案例频繁出现，我们为发射投射物效果（碰撞中途目标）节点增加了额外的提示信息。当该节点的目标类型为单位，且用户只为该节点配置了碰撞中途单位效果时，该节点会显示一个详细的提示信息，告知用户若想要制作追踪目标单位的弹道，必须配置“抵达目的地时效果”，而非“碰撞中途单位时效果”。
  * 属性/节点/蓝图出现错误时，对应的位置会变为红色，提示用户错误位置。
  * 我们优化了在数据编辑器蓝图中新建节点的逻辑。如果用户在试图通过拖出连线的行动来新建新的节点时，将鼠标拖了到蓝图视口边缘（如右边缘和下边缘），蓝图会自动向着对应方向滚动，此外，新建节点的选项菜单也会自动调整出现位置，以避免被蓝图视口的边缘所遮挡。
  * 我们改进了数据编辑器CSV导入导出功能，现在导入CSV文件更不容易导致崩溃了。
  * 我们优化了单位等级升级配置的配置逻辑。当用户没有给等级升级配置设置任何基础等级数据时，英雄的每级属性加成依然会生效。

### 触发编辑器[​](/Manual/NewPathNote/2023PathNote/2023-06-29#触发编辑器 "触发编辑器的直接链接")

  * 新版触发编辑器终于支持撤销重做了。（重要消息说两次）
  * V2新增触发语句：当玩家暂时离开时，此事件将在玩家切后台时触发。
  * 触发器左侧树状列表中的全局变量现在可以直接拖拽到右侧触发器元素中进行填充。
  * 触发器现在可以直接执行其他触发器，它拥有一个额外选项，允许将当前触发器的事件参数传递过去，或者构建自定义的事件参数。（事件参数指的是“触发事件的xxxx”等参数）
  * 在听取了用户建议后，我们进一步改进了“暂停所有单位”动作的逻辑。现在改动作可以选择是否同时暂停游戏时间。如果选择不暂停游戏时间，则游戏时间依然会继续推进，服务器和客户端依然能互通消息。若已经使用过了这一动作，并想要调整这一配置，用户需要重新选择一次这个动作。
  * 此外，现在还可以通过触发器来单独地暂停一个指定单位。
  * 我们调整了物品创建事件的逻辑，现在捕捉物品创建事件后可以立刻修改该物品的物品品质，而不会被重置回物品的默认品质。（以前需要等待0秒再设置才正常）
  * 新版的循环遍历数组动作现在又可以获取数组索引了。
  * 我们改善了所有四种循环遍历动作，当遍历对象为空值时，遍历操作不会再出错并导致脚本执行失败，而是会直接跳过这一循环逻辑并继续执行后续的动作。
  * 遍历单位组的逻辑也获得了改善，循环遍历并尝试将单位组中所有单位从游戏中删除时，不会再出现部分单位被跳过的现象。
  * 单位组对象增加了复制单位组的方法，可以返回一个指定单位组的拷贝。
  * 客户端触发器现在可以直接获取物品品质。
  * 我们改进了服务端和客户端触发器中“通过数编Id获取数编表”函数的逻辑，使其更易于使用。
  * 单位的面向对象方法中添加了“请求施法”方法，这个动作可以对单位下达使用各种不同技能的指令。除此之外，对于需要施法目标的技能，在此方法的目标函数中填写空会让该单位尝试原地智能施法。
  * 物品栏格子对象现在可以直接获取当前格子中的物品，若没有装载任何物品，该属性值为空。
  * 现在可以单独暂停一个指定单位的技能冷却和Buff时间流逝。
  * 我们改进了Map和简单表的取值、设值方法的措辞描述。现在用户可以从句子措辞中正确区分出当前操作的对象是Map还是简单表。
  * 在触发器动作、方法、类型等内容的配置界面中，现在增加了排序字段。在其中设置数字可以影响这些条目在语句选择界面中的排序顺序。
  * 现在触发器执行时遇到的运行时错误会尽量提示它们在触发器语中的位置和行数。
  * 技能对象现在有了一个获取其禁用计数的方法。
  * 我们改进了条件树中与/或语句的措辞描述，现在它们应该可以更明确地提示自身的与或逻辑只会影响它们各自的子条件。
  * 我们修正了客户端事件“玩家改变主控单位”的措辞。将其中错误使用的“英雄”字样改为“主控单位”，以免混淆两个不同的概念。
  * 我们调整了触发器右键菜单的字符缩进，现在右键菜单的选项不再会贴着左侧边了。

### 预制功能-抽奖[​](/Manual/NewPathNote/2023PathNote/2023-06-29#预制功能-抽奖 "预制功能-
抽奖的直接链接")

新增预制功能-大厅抽奖功能。

此功能为商业化常用的基础功能，所以本次放出后，我们还会在多个环境进行较为充分的测试，欢迎大家试用并向我们反馈使用的问题。

### 竖屏游戏模式[​](/Manual/NewPathNote/2023PathNote/2023-06-29#竖屏游戏模式
"竖屏游戏模式的直接链接")

竖屏模式在过去一段时间由于缺少实际需求，处于长期未维护的状态。本次更新将竖屏恢复为可用状态，但是并未对预制功能进行竖屏适配。未来将根据实际需求再考虑相关的适配问题。

竖屏可以在 『数据编辑器-地图设置-默认地图设置』 中选择『竖屏』

### 其他优化[​](/Manual/NewPathNote/2023PathNote/2023-06-29#其他优化 "其他优化的直接链接")

  * 对于编辑器未打开项目和未打开场景的情况，我们增加了简单的信息提示，减少新用户在此场景的困惑。
  * 优化了Win11下打开进度、调试进度窗口层级的问题，减少新用户使用中的困惑。
  * 对默认的血条进行了更新，此更新只对新建的项目生效，如果旧项目想要使用新的血条，可以用新建项目的『game_hud』文件夹覆盖旧项目。

![新的血条视觉](https://doc.sce.xd.com/assets/images/新的血条视觉-3aa9ed41f38e0321b902cf149a4c65f4.webp)

  * 对默认的背包UI进行了更新，后续我们会持续对预制功能的UI进行统一风格的更新迭代。

![新的背包视觉](https://doc.sce.xd.com/assets/images/新的背包视觉-922977fbaa2cdbb1348d5c7e60f8c516.webp)

  * 对默认的方向摇杆进行了UI更新

### 教程改进[​](/Manual/NewPathNote/2023PathNote/2023-06-29#教程改进 "教程改进的直接链接")

  * 我们将官方调试作弊码教程更新到了我们官网教程中【[链接](https://doc.sce.xd.com/%E5%8A%9F%E8%83%BD%E6%89%8B%E5%86%8C/%E8%A7%A6%E5%8F%91%E7%BC%96%E8%BE%91%E5%99%A8/%E6%96%B0%E7%89%88%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88V2%EF%BC%89/%E4%BB%A5%E6%A8%A1%E5%9D%97%E5%88%92%E5%88%86%E7%9A%84%E8%A7%A6%E5%8F%91%E5%99%A8%E6%A1%88%E4%BE%8B/%E8%B0%83%E8%AF%95%E7%9B%B8%E5%85%B3/%E6%9C%AC%E5%9C%B0%E8%B0%83%E8%AF%95%20%E4%BD%BF%E7%94%A8%E4%BD%9C%E5%BC%8A%E7%A0%81%E6%B5%8B%E8%AF%95)】
  * 我们对官网教程进行了一次整理，更新并修正了一些在旧版触发器时期编写，在新版触发器时期不再适用的截图、内容与描述。

### 创作者中心[​](/Manual/NewPathNote/2023PathNote/2023-06-29#创作者中心 "创作者中心的直接链接")

  * 创作者中心新增账号封禁功能（即将更新）
  * 创作者中心新增广告收入查看功能（即将更新）

### 错误修复[​](/Manual/NewPathNote/2023PathNote/2023-06-29#错误修复 "错误修复的直接链接")

  * 修复了为单位添加AI触发器动作的一些问题。
  * 修复了任意单位事件在配置正常的情况下，对应的脚本代码有时仍然会生成错误警告的问题。
  * 修复了打开触发器代码文件的时候有中文名会崩溃的问题。
  * 修复了界面编辑器新建一个事件文件时会提示代码为旧版触发器的问题。
  * 修复了预制功能：对话系统引用后报错的问题。
  * 修复了带有血条的物品在拾取后血条依然会显示且显示位置错乱的问题。
  * 修复了服务器事件转发到客户端时数组元素会出错的问题。
  * 修复了数据编辑器中自定义效果奖励的奖励物品消耗字段无效的问题。
  * 修复了使用自定义属性公式的属性在设置基础值或百分比值后，最终值没有正常按照公式刷新的问题。
  * 修复了玩家会在其它玩家丢弃物品时看到“已丢弃物品”信息的问题。
  * 修复了物品即使没有在装备状态下丢弃时也会触发“取消装备”事件的问题。

[上一页2023年6月19日星火编辑器更新日志](/Manual/NewPathNote/2023PathNote/2023-06-19)[下一页2023年7月17日星火编辑器更新日志](/Manual/NewPathNote/2023PathNote/2023-07-17)


