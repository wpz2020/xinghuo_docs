  * [](/)
  * 更新日志
  * 最新更新日志
  * 2024年5月7日更新日志【2024.04版本】

复制链接

本页总览

# 2024年5月7日更新日志【2024.04版本】

**除部分严重BUG修复会覆盖旧版本，以下新功能均在编辑器版本2024.04中生效。**

**开发者可以在编辑器顶部菜单-编辑器版本中进行版本切换。**

### 重要里程碑[​](/Manual/NewPathNote/2024PathNote/2024-05-07#重要里程碑 "重要里程碑的直接链接")

星火第一款在Steam发行的游戏已上线Steam，欢迎大家添加愿望单。

[阴阳迷宫 on Steam](https://store.steampowered.com/app/2967690)

星火制作的游戏可以上线TapTap和Steam，从各个方面来说，上线TapTap的难度要远低于上架Steam。

目前已经有100多款游戏上线了TapTap，但是只有一位开发者选择了上架Steam，这也能够看出Steam竞争环境的困难之处。

对于星火游戏上线Steam，我们也整理了一些信息：

  * Steam每上线一个游戏，需要100美元，这一费用需要开发者承担。

  * Steam的配置复杂度和物料要求远高于TapTap，需要开发者参考Steam发行文档进行充分的了解。

  * 如果一款游戏在TapTap缺少足够的竞争力，我们不认为这一游戏会在Steam上有竞争力。

  * Steam的流量不同于TapTap，流量多少几乎完全取决于愿望单积累的数量；而愿望单的积累往往需要依赖游戏外的发行和营销行为，对开发者有更高的要求；B站上诸多独立游戏开发者已经在践行相关路径，希望每一位决定要在Steam上线星火游戏的开发者，考虑清楚这里的成本和困难。

  * Steam的市场营销最佳实践请参考

[Best Practices, Marketing (Steamworks
Documentation)](https://partner.steamgames.com/doc/marketing/bestpractices)

  * Steam上线后的收入，会扣除30%的渠道成本，且对于中国的开发者，还会从剩余70%中扣除20%的税收，实际开发者可获得的收入为总收入的56%；对于使用星火编辑器的开发者，我们将以Steam收入的56%作为商业化收入进行阶梯式分成；简而言之，若游戏收入100元，30元归属于Steam，14元作为税收；56元作为开发者和星火进行阶梯式分成的收入。

具体计算可以带入之前公式的计算方法中进行计算

[【腾讯文档】星火编辑器创作者激励计算过程公示](https://docs.qq.com/sheet/DYlBsemxnbWVlakFV?tab=BB08J2)

### 需要开发者注意的改动[​](/Manual/NewPathNote/2024PathNote/2024-05-07#需要开发者注意的改动
"需要开发者注意的改动的直接链接")

从合规的角度考虑，现在通过输入框控件获取文本时，会强制的经过一次敏感词判断，这一调整导致获取文本变成一个有通信行为，因此相关语句不再可以在计时器内试用。

### AI系统重构[​](/Manual/NewPathNote/2024PathNote/2024-05-07#ai系统重构
"AI系统重构的直接链接")

针对AI系统的一系列痛点问题，星火编辑器对AI的底层实现进行了一次大重构。

  * 『仿默认AI』更名为『默认AI』，并进行了重构。

  * 游戏中的默认单位AI今后直接使用数编中的『默认AI』（即原『仿默认AI』）。

  * 不再有用户无法更改的隐藏默认AI。

  * 在地编中选中单位勾选使用默认AI与在触发器中创建AI时勾选使用默认AI将一致使用数编默认AI。

  * 在触发器中添加默认AI与添加『数编表：默认AI』将获得相同的结果，而非使用隐藏的内置AI。

  * AI系统变为完全由数编中的AI行为树操控，用户可以自由修改AI的行为。

  * 现在，AI有施法指令时依然会按固定频率走AI行为树。（在过去，当AI单位在施法时，不会进入行为树，导致部分AI逻辑不可实现）

重构后新的AI系统不仅更易于用户自定义，还解决了就有AI系统的以下几个常见问题。

  * 默认AI在没能放出技能时不会再一直追着玩家到天涯海角（现在到了最大脱离范围就会返回）。

  * 近战单位的AI不会再一路走到玩家脚底下才施放技能。

  * 当AI单位的攻击技能拥有非常快的攻速或冷却时间时，AI依然只会每0.5秒使用一次该技能的问题。（现在AI会尝试以最高速度使用这些技能，请尽量避免无施法时间、技能消耗和冷却的三无AI技能）

###
按住连续施法机制【实验性功能】[​](/Manual/NewPathNote/2024PathNote/2024-05-07#按住连续施法机制实验性功能
"按住连续施法机制【实验性功能】的直接链接")

![](https://doc.sce.xd.com/assets/images/按住连续施法机制示例-170cc3745ad908b1925f3e6f7aaf3cbe.webp)

  * 星火编辑器增加了按住连续施法机制，适合用来制作按住后连续使用并可依照光标朝向更新每次施法朝向的技能。

  * 数编中的目标指示器增加了『按住连续施法』勾选项。该选项仅对无目标、向量目标和地面目标技能生效。

  * 在勾选该选项后，玩家只需长按对应的技能按钮即可实现连续使用技能。此外，对于向量目标技能和地面目标技能，单位每次施法都会使用最新技能指示器朝向和目标而非永远保持最初的朝向和目标。

  * 默认的『普攻技能模版』现已改为使用勾选了『按住连续施法』的指示器，基于该模版创建的技能今后将默认支持按住连续施法，用户可以酌情修改。『近战普攻示例单位』身上的近战技能现在也都可以进行按住连续施法。

  * 当技能同时配置了『智能施法』和『按住连续施法』时，长按技能的连续施法效果不会引发智能施法。但短按技能依然可以引发智能施法。

  * 拥有『按住连续施法』特性的技能在被短按时的表现仍与其它技能保持一致。

  * 当技能同时有『按住连续施法』特性和『无限蓄力』特性时，只有『无限蓄力』会生效。

  * 该功能依然还在实验性阶段，我们今后会进一步优化其功能。

### 动态动画别名[​](/Manual/NewPathNote/2024PathNote/2024-05-07#动态动画别名
"动态动画别名的直接链接")

  * 在过去，星火编辑器的用户可以通过添加和删除附加表现来实现单位的换武器机制。但当用户想要实现在切换武器后使用不同的行走动画时，就会变得有些麻烦：因为行走所使用的『Move』动画别名只能对应到一个动画上。因此，在过去，实现切换行走动画的标准方案是直接动态替换配了另一个行走动画的单位模型素材节点。

  * 为了简化这一过程，星火编辑器现在运行在运行时动态修改单位和表现的动画别名。在客户端触发器中新增了『修改动画别名』和『修改动画别名（映射表）』两条动作。可以分别单独替换指定单位/表现的一个指定的动画别名或整体替换指定单位/表现的所有动画别名。如此，用户只需要动态修改单位的『Move』动画别名就可以实现动态更改行走动画。

  * 需要注意的是，即使动画别名允许动态替换，玩家所下载下来的游戏文件也会受到预加载动画文件的限制，因此对于一个玩家客户端没有下载的动画文件，即使为它设置了动画别名，客户端也无法正常播放。因此对于希望通过动态动画别名功能加载的额外的捏人动画文件，最好将它们设置到单位的模型素材节点的『额外加载动画』字段，以确保玩家会正常下载它们。

  * 此外，由于修改动画别名触发器是客户端触发器的动作。建议用户最好在服务器触发器中将单位当前应该使用的移动动画存储在单位属性中，以确保客户端出现断线重连时依然有办法通过单位属性来获取这一信息，以重新设置动画别名。

### 可破坏物和单位高度逻辑优化[​](/Manual/NewPathNote/2024PathNote/2024-05-07#可破坏物和单位高度逻辑优化
"可破坏物和单位高度逻辑优化的直接链接")

  * 星火编辑器增加了一种新的单位C++类型『可破坏物』。用户可以将单位的『单位C++类型』字段设置为『可破坏物』来将单位设置成这样的单位。

  * 可破坏物无法进行主动移动（行走或移动器），但可以用触发器进行瞬移，无法拥有技能、Buff和其它各种组件、可以拥有碰撞和单位属性。可破坏物的服务器资源消耗通常低于普通单位，适合用于进行大量静止单位的优化，也可以用来实现可被破坏的地形、路障、树木等等。

  * 考虑到可破坏物的常见用法，我们特别保留了它可以在地编中设置高度的特性。用户只需要在单位表中给可破坏物单位赋予高度属性，就可以在地编中自定义其高度。（只要在地编中取消勾选沿用单位类型属性选项框，就可以在地编中针对每个单位来修改属性，其中修改高度属性还可以直观地在地编中预览单位的高度位置）

  * 对于意图将可破坏物单位充当地编中的可破坏装饰物并想要手动调整它们在地编中的高度的用户，我们建议同时在单位的默认单位状态字段中增加『忽略地形高度』状态。这样，用户在地编中所调整的可破坏物体高度将不会再随着其所处的地表高度而变化，令地编中的预览高度与游戏中的高度更加一致。

  * 在开发以上功能的同时，我们也顺便优化了非可破坏物单位高度属性的一个旧有问题：设置了『忽略地形高度』并拥有初始高度的单位在进入游戏后会丢失高度表现，只有在移动后才会重置高度到正确位置。现在普通单位也不需要移动就能直接出现在正确的高度了。

### 交互行为的死后禁用与复活[​](/Manual/NewPathNote/2024PathNote/2024-05-07#交互行为的死后禁用与复活
"交互行为的死后禁用与复活的直接链接")

  * 现在行为节点（如『交互行为』）增加了死后不删除和死后禁用勾选项。这两个勾选项的作用类似于Buff的对应勾选项。在默认情况下，两者都处于被勾选状态。

  * 勾选了『死后不删除』的交互行为，在单位被杀死后不会被删除，在单位复活时依然能再次生效。而一旦勾选了『死后禁用』，则即使行为没有在死后被删除，持有交互行为的单位死亡后也无法进行交互。

  * 若不勾选『死后不删除』，则交互行为在拥有该行为的单位死后也不会被删除。

### 项目设置功能优化[​](/Manual/NewPathNote/2024PathNote/2024-05-07#项目设置功能优化
"项目设置功能优化的直接链接")

#### 『玩家属性配置』面板调整[​](/Manual/NewPathNote/2024PathNote/2024-05-07#玩家属性配置面板调整
"『玩家属性配置』面板调整的直接链接")

『玩家属性配置』面板更名为『队伍与玩家配置』面板，以明确其用途，避免与触发器中『玩家属性』的概念发生混淆。

####
『调试时自动保存』、『定时保存』功能实装[​](/Manual/NewPathNote/2024PathNote/2024-05-07#调试时自动保存定时保存功能实装
"『调试时自动保存』、『定时保存』功能实装的直接链接")

定时保存功能现在可以正常的生效了

我们将『调试时自动保存』作为了默认选项，并且建议所有的开发者都勾选此选项。

对于『调试时自动备份』在何时应该勾选，我们给出如下建议：

**以最快的调试速度为目标，我们建议开发者勾选『调试时自动保存』，且不要勾选『调试时自动备份』界面编辑器**

### 预制功能[​](/Manual/NewPathNote/2024PathNote/2024-05-07#预制功能 "预制功能的直接链接")

#### 局内商店更新为国风UI[​](/Manual/NewPathNote/2024PathNote/2024-05-07#局内商店更新为国风ui
"局内商店更新为国风UI的直接链接")

我们将局内商店的UI进行了整体的更新，更新为国风样式的UI，考虑到之前商城的自定义程度不高，本次更新并未引入新的预制功能ID，如果开发者已经在旧版本进行了比较深度的自定义，需要慎重考虑是否更新到04版本。

#### 对话系统新增国风版本：游戏内对话系统-
国风-G04[​](/Manual/NewPathNote/2024PathNote/2024-05-07#对话系统新增国风版本游戏内对话系统-国风-g04
"对话系统新增国风版本：游戏内对话系统-国风-G04的直接链接")

我们将对话系统的UI进行了整体的更新，更新为国风样式的UI；考虑到之前开发者可能已经对对话系统的UI做了较多的自定义，我们为新风格的对话系统提供了新的ID，开发者可以选择保持使用旧的对话系统，也可以选择新的国风对话系统。

#### 游戏内任务新增国风版本：游戏内任务-
国风-G05[​](/Manual/NewPathNote/2024PathNote/2024-05-07#游戏内任务新增国风版本游戏内任务-国风-g05
"游戏内任务新增国风版本：游戏内任务-国风-G05的直接链接")

我们将游戏内任务的UI进行了整体的更新，更新为国风样式的UI；考虑到风格的差异较大，我们为新风格的任务系统提供了新的ID，开发者可以选择保持使用旧的任务系统，也可以选择新的国风任务系统。

**在未来的版本，我们可能会将旧的UI风格的预制功能进行隐藏，这一行为不会影响添加了相关功能的项目，但是会减少新项目使用旧预制功能的情况。**

#### 技能描述信息优化[​](/Manual/NewPathNote/2024PathNote/2024-05-07#技能描述信息优化
"技能描述信息优化的直接链接")

对长按显示技能信息进行了比较系统的优化：

  * 点击一个可释放的技能时，首先显示的是它的技能指示器。

  * 长按技能达到一定时间时显示技能描述信息。

  * 显示技能描述信息时，拖动技能会取消技能描述消息，转为调整技能指示器或者转为技能可释放状态。

### 创作者中心[​](/Manual/NewPathNote/2024PathNote/2024-05-07#创作者中心 "创作者中心的直接链接")

  * 创作者中心-运营管理-商业化运营中新增『游戏预估收入』报表，由于历史上有部分游戏的收入并未在星火币的统计范围内，所以此功能可能只会在新的周期提供数据，并且可能会存在部分数据的缺漏。**具体的收入请依然以结算单为准。**

  * 根据云变量筛选ID的功能支持货币类型云变量了。

### 自定义预制功能[​](/Manual/NewPathNote/2024PathNote/2024-05-07#自定义预制功能
"自定义预制功能的直接链接")

**从04版本起，开发者可以创建自己的预制功能了。**

目前有如下信息需要注意：

  * 预制功能必须使用预制功能模板创建。

  * 预制功能可以按文档中选择本地预制功能，在编辑器内调试可用。但是如果要上传Canary调试，则需要将预制功能进行『上传』。

  * 预制功能上传、商店分发、更新的相关逻辑我们还会持续优化。

  * 相关文档会在近日进行更新。

### 拼接场景功能[​](/Manual/NewPathNote/2024PathNote/2024-05-07#拼接场景功能
"拼接场景功能的直接链接")

我们又为场景拼接功能增加了一些符合直觉的触发语句。

旧的Demo仍有些需要修改的地方，预计我们会在本周内完成修改，将Demo和文档一同放出。

### 血条编辑器【实验性功能】[​](/Manual/NewPathNote/2024PathNote/2024-05-07#血条编辑器实验性功能
"血条编辑器【实验性功能】的直接链接")

实际上血条编辑器已经有较强的生产力，开发者可以用其制作出个性化的头顶血条、物品信息、人物标识等游戏效果。

但是目前由于一些技术原因，血条组件还不支持列表调整顺序、与数编的联动尚未全部完成、仍有些BUG在修复中，所以我们将其作为一个实验性功能开放给大家。

稍后我们会接触此功能的隐藏，所有使用04版本的开发者均可在顶部看到相关功能并进行使用。

预计05版本我们会解决上面提到的比较重要的优化问题。

### 触发编辑器[​](/Manual/NewPathNote/2024PathNote/2024-05-07#触发编辑器 "触发编辑器的直接链接")

  * 技能对象的面向对象方法中增加了『获取技能最大冷却时间』和『获取多段技能最大冷却时间』的方法。对于多段技能，应当使用后者来获取最大冷却时间。

  * 技能的『激活自定义冷却』语句中，冷却上限参数调整为可以选择一个枚举值“技能默认最大冷却”或者数值。当冷却上限为“技能默认最大冷却”时，无需填写当前冷却时间；否则需要填写冷却上限和当前冷却时间。

### 星火对战平台[​](/Manual/NewPathNote/2024PathNote/2024-05-07#星火对战平台
"星火对战平台的直接链接")

  * 对星火对战平台的排序逻辑进行了优化，增加了更多的筛选维度。

  * 对星火对战平台的胶囊样式、返回气泡进行了优化。

### 其他功能优化[​](/Manual/NewPathNote/2024PathNote/2024-05-07#其他功能优化
"其他功能优化的直接链接")

  * 增加控件对齐的快捷按钮，方便修改子控件在父控件的布局其他编辑器功能优化

  * 编辑器内调试时，新增「调试服务全网使用率」，若这一指标过高，则代表可能有其他开发者在进行一些性能并不优雅的调试，在这种状态下，调试信息中的服务器使用率会偏高。

  * 对数据编辑器中蓝图节点右键的顺序进行了调整，减少了由于误操作而删除节点的可能性。

### 错误修复[​](/Manual/NewPathNote/2024PathNote/2024-05-07#错误修复 "错误修复的直接链接")

  * 修复了部分极端条件下，数编中的『特殊单位响应』（如单位死亡响应）不会发动的问题。

  * 修复了触发编辑器无法正常显示数编单位表部分特殊字段的问题，如『血条类型』。

  * 修复了运行时创建两个对称且带粒子特效的单位时，该单位旋转角度错误且闪烁的问题。

  * 修复了主控单位在不同场景间跳转时，偶现技能摇杆丢失的问题。

  * 修复了原地释放带有冲锋效果节点的技能，编辑器内此单位消失，移动端屏幕闪烁的问题。

  * 修复了另存过的项目资源模型，即使配置正确，仍会在运行时出现的『未正确播放动画』警告的问题。

  * 修复了『剑刃风暴』样例技能播放动画时出现的『未正确播放动画』警告的问题。

  * 修复了以『触发器调试模式』启动项目调试后，UI界面会卡住并且不断叠加的问题。现在『触发器调试模式』应该恢复正常了。

  * 修复了在PC上当玩家没有主控单位时，右键点击地面会报错的问题。

  * 修复了非PIE调试时的异常显示问题。

[上一页2024年4月18日更新日志【2024.04版本】](/Manual/NewPathNote/2024PathNote/2024-04-18)[下一页2024年5月21日更新日志【2024.06版本】](/Manual/NewPathNote/2024PathNote/2024-05-21)


