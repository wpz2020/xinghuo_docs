  * [](/)
  * 更新日志
  * 2023年更新日志汇总
  * 2023年5月10日星火编辑器更新日志

复制链接

本页总览

# 2023年5月10日星火编辑器更新日志

### 优化编辑器功能：[​](/Manual/NewPathNote/2023PathNote/2023-05-10#优化编辑器功能
"优化编辑器功能：的直接链接")

#### 公式属性固化[​](/Manual/NewPathNote/2023PathNote/2023-05-10#公式属性固化
"公式属性固化的直接链接")

增加了新的触发器动作：为物品属性公式和词条生成固定随机结果。

  * 对于使用了公式属性或随机属性的物品，该函数会批量计算物品的所有随机属性和公式属性，并为它们生成固定的结果，这些结果将不会随公式环境变化而更改。此外，对该物品使用『转化为数据信息』函数后，获得的云变量表也会存有这些固定数值，利用这些信息重新实例化的物品也会继承这些固定的属性数据。
  * 执行该动作后，物品若有任何显示为`<`公式值`>`属性加成的属性都会显示确定的属性加值。
  * 对于属性公式值取决于持有者单位的属性的物品，该触发器动作还可以通过点击最后的+号来添加一个参考单位，即使物品并没有被任何人持有，也可以根据作者所提供的参考单位的属性来生成固定的随机结果。

#### 动态物品品质[​](/Manual/NewPathNote/2023PathNote/2023-05-10#动态物品品质
"动态物品品质的直接链接")

我们对物品系统的品质机制进行了改进。今后，设置物品品质等级的最佳实践不再是通过为物品添加特定的物品分类。每个物品的品质将可以被动态更改和保存。

  * 现在可以在数据编辑器的物品节点中配置物品的默认品质等级。
  * 品质等级1以上的物品将使用 『通用背包设置』中品质与颜色定义配置下对应编号的品质设置来显示其物品品质（可配置该品质的颜色、名称和图标）。
  * 服务端触发器可以获取 『物品的品质等级』或 『设置物品的品质等级』。
  * 客户端触发器可以获取『物品的品质等级』。
  * 若设置的物品品质等级高于通用背包设置中品质定义的最大等级，物品的品质将显示为用户所定义的最高等级物品品质。
  * 【对旧版配置方式的兼容】若物品的品质等级为0，但物品在数编中的『分类标签』属性中以旧版方式配置了物品品质分类，则物品依然会正常地显示旧版的品质。
  * 设置了自定义品质等级的物品在经过『转化为数据信息』并重新实例化以后也会保留。

#### 单位字符串属性[​](/Manual/NewPathNote/2023PathNote/2023-05-10#单位字符串属性
"单位字符串属性的直接链接")

  * 现在单位字符串属性拥有了完整支持：
  * 现在可以在数据编辑器的常量配置中对字符串类型的单位属性进行声明。用户可以命名自定义的字符串单位属性。
  * 在单位属性中，可以添加字符串类型的单位属性，并设置它们的初始值。（注意字符串单位属性初始值是新的字段，而非旧有的单位属性初始值字段，旧有的单位属性初始值只可填写数值）
  * 可以在服务端触发器中通过『单位的字符串属性』和『设置单位的字符串属性』来对单位字符串属性进行设置和读取。
  * 可以在客户端触发器中通过『单位的字符串属性』读取服务端设置的单位字符串属性。

#### 预组队与玩家队伍变更支持[​](/Manual/NewPathNote/2023PathNote/2023-05-10#预组队与玩家队伍变更支持
"预组队与玩家队伍变更支持的直接链接")

  * 现在支持读取玩家的局外组队状况，并可在游戏内重新安排玩家的队伍：
  * 可使用『玩家的局外组队队伍Id』获取玩家的局外队伍Id，相同局外队伍Id的玩家可认为是组队进入游戏的。
  * 可使用『设置玩家队伍编号』动作来修改玩家的游戏内队伍号。同一个队伍中的玩家在游戏中默认结盟并共享视野。结合以上两个API可以实现『将在局外组队进入游戏的玩家分到同一个队伍里』之类的功能。
  * 可使用『玩家的队伍编号』函数来获得玩家在游戏内当前队伍号。

### 数据编辑器[​](/Manual/NewPathNote/2023PathNote/2023-05-10#数据编辑器 "数据编辑器的直接链接")

  * 数据编辑器菜单栏加入了前进和后退指令，快捷方式为，Alt+方向左键(`<`-)与Alt+方向右键(-`>`)，后面会增加按钮操作。
  * 增加了新的数编效果节点：玩家属性修改节点。
  * 单位节点增加了『死后保留时间』字段。该值将决定单位死亡后『尸体』保留的时间（秒），经过这一段时间后单位会被彻底删除。在这段时间内单位被视为死亡，但依然存在，期间可被复活或修改属性。如果单位节点的』单位模块』字段中拥有『死后不删除』模块，则『死后保留时间』字段无效，单位死后默认也会永久性地存在，除非手动删除。（英雄单位模版默认自带这一属性）
  * 自定义验证器错误信息。数据编辑器的常量配置中现在加入了对自定义验证器错误信息的配置。用户可以设置新的验证器错误代码，并可在验证器中返回这些自定义的错误代码。如果用户在技能的第一个效果的验证器中返回了这些错误代码，那么在玩家尝试使用这些技能但却没有通过验证时，界面上将会显示对应的自定义错误提示信息。
  * 玩家属性的属性上限现在增加到1000个。 v增加了新的单位属性：高度。该属性影响单位的初始高度值。用户在地形编辑器中手动修改单个地编单位的初始高度属性，并可在地编中预览修改结果。
  * 数据编辑器的常量配置中，可附加枚举与可附加列表Key的具体内容现在默认为自动收缩，以缓解由于列表太长而导致的用户修改不方便的问题。
  * 新版触发器地图的所有技能现在都有默认的技能数值公式。在勾选任意技能的『自定义技能数值公式』选项后，所有技能都会出现默认的耗魔公式、冷却公式、最大层数公式、施法距离公式、阶段时长公式，方便用户在此基础上进行进一步的修改。以解决用户在勾选『自定义技能数值公式』后必须从零开始编写技能公式的问题。
  * 改善了部分地图没有正确地设置单位目标技能导致的无法对任何目标使用的问题。
  * 奖励单位节点现在可以勾选是否使用默认AI。
  * 调整了数据编辑器节点选择图片的交互模式，可以点击图片icon选择『我的资源』中的图标，也可以点击右侧按钮打开本地图片。
  * 调整了蓝图预览的交互，现在可以直接点击模型按钮替换预览的模型了，方便选择技能动画时更好的筛选所需模型的动画。
  * 我们优化了单位目标技能的内部逻辑与其他类型技能的一致性，将一个技能从其他目标类型改为单位目标后不会再出现无法对任何目标使用的问题。（仍然需要技能目标符合过滤）
  * 优化了数编的报错信息，可以更清晰的找到报错对应的效果节点了。

### 新版触发编辑器（V2）[​](/Manual/NewPathNote/2023PathNote/2023-05-10#新版触发编辑器v2
"新版触发编辑器（V2）的直接链接")

  * 触发器左侧列表现在可以进行ctrl+c，ctrl+v操作（复制/粘贴）。
  * 现在鼠标悬停在触发语句上，可以看到语句的说明了，但是我们仍需要一段时间来陆续覆盖所有的语句。用户也可以对自己新建的函数、全局变量、成员等内容配置悬停信息。
  * 现在允许对云变量表进行类型转换操作。
  * 属性现在和方法一样可以被配置为可面向过程使用。
  * 对于整条触发器动作失效的情况，触发器保存后的脚本不再生成‘_’而导致脚本运行失败，而是会生成更有帮助的运行时错误提示。
  * 现在允许在客户端和服务器触发器中动态添加事件。
  * 所有的数编表对象都可以通过『.数编Id』属性来立即获得其数编表Id。
  * 当触发器中的语句过多时，选中接近底边的触发器条目并点击右键出现的菜单不会再被底边栏遮住。
  * 客户端触发器现在加入了三角函数和插值函数。
  * 构造函数参数现在可以加上public声明，用于快速声明类的属性。
  * 单位对象增加了新的面向对象方法：『强制刷新公式属性值』。若指定的属性为自定义公式属性，该动作能强制重新计算该属性的公式值结果并同步到客户端。
  * 在数编内设置的单位初始属性不会进行公式运算，只有在第一次变化时才会计算，当需要对初始属性强制进行刷新时可以调用这个API。
  * 现在在使用触发器命令单位使用技能时，允许对向量目标技能传一个点目标，单位会移动到施法范围内后，向着目标点的方向施展技能。
  * 新增了『物品-创建』事件，可以用来捕捉任意物品，或任意指定类型物品的创建事件。并可通过事件参数获得对应的物品。
  * 增加了『将物品移动到指定物品栏内指定序号的格子』的触发器动作。
  * 可通过单位的『物品栏』属性获取单位身上所有的物品栏对象。
  * 可通过物品栏对象的『格子』属性获得物品栏对象上的所有格子。
  * 可通过物品栏格子对象的『放置物品』方法来向特定的格子放置物品。
  * 删除触发器时，增加了二次确认，减少误操作。
  * 客户端触发器可以获得BUFF对象的数编ID了。

### 模版地图与样例技能[​](/Manual/NewPathNote/2023PathNote/2023-05-10#模版地图与样例技能
"模版地图与样例技能的直接链接")

  * 默认样例技能中的可开关技能现在改用可开关技能模版来重写了。
  * 默认样例物品中的『金币』物品现在使用『修改玩家属性』节点来修改金币属性，而非修改单位的『金钱』属性。
  * 改善了闪电链和治疗波等技能的实现，减少了节点的数量，并不再采用繁琐的Buff单位组来实现对已命中过的单位的追踪。
  * 塔防模版（新版触发器）中的防御塔自动普攻技能现在使用『自动施法』与『连续施法』机制重新实现，不再使用周期性搜索效果来实现。这一改动更加符合我们的最佳实践。使得这些防御塔能够正确地享受的攻速属性的加成，也能被正确地禁用攻击技能。（只会影响今后新建的地图）

### 预制功能[​](/Manual/NewPathNote/2023PathNote/2023-05-10#预制功能 "预制功能的直接链接")

  * 新增预制功能『用户资料面板』和对应触发，使用后可以在游戏内添加其他玩家为好友了；对应语句为客户端触发：打开[玩家]个人资料面板。
  * V2新增外部商品购买时触发的事件，用于处理大厅的购买行为、获得道具的行为；但是相关触发还需要进行比较充分的测试，启用时间可以等群内进一步通知。

### 编辑器其他优化[​](/Manual/NewPathNote/2023PathNote/2023-05-10#编辑器其他优化
"编辑器其他优化的直接链接")

  * 去掉了地形编辑器中右键菜单的部分无效遗留选项
  * 我的资源中，另存为的粒子现在都会归属到一个新的分类『我创建的』，方便大家对资源进行管理；后续其他类型的资源也会陆续以此模式进行调整
  * 客户端的窗口布局会被保存下来，也可以在通过『项目设置-还原布局』来恢复默认布局
  * 界面编辑器支持序列帧动画了，具体可以看[文档官网的案例](https://doc.sce.xd.com/%E5%8A%9F%E8%83%BD%E6%89%8B%E5%86%8C/%E7%95%8C%E9%9D%A2%E7%BC%96%E8%BE%91%E5%99%A8/%E5%BA%8F%E5%88%97%E5%B8%A7%E5%8A%A8%E7%94%BB)

### 底层数据存储切换[​](/Manual/NewPathNote/2023PathNote/2023-05-10#底层数据存储切换
"底层数��据存储切换的直接链接")

  * 今日更新会伴随底层数据切换，迁移后，V2使用了云变量的项目会受到影响：内测环境Canary测试版本数据会被清空

### 社区生态支持：[​](/Manual/NewPathNote/2023PathNote/2023-05-10#社区生态支持
"社区生态支持：的直接链接")

  * 计划本周上传新的300个免费的武器图标，我们还会持续丰富星火编辑器中的免费共享美术资源，想要利用贡献度定制美术资源的开发者可以联系运营喵沟通需求~
  * 『新版触发器』的教程案例已经增加到了十四个，并且还在持续增加，欢迎新人尝试学习
  * 星火编辑器团队整理了2023年工作计划，方便大家了解我们的近期规划
  * 为《晓洛的抉择》定制了宣发使用的KV和游戏图标

### 修复编辑器问题：[​](/Manual/NewPathNote/2023PathNote/2023-05-10#修复编辑器问题
"修复编辑器问题：的直接链接")

  * 对编辑器的内存占用、底层的逻辑进行了优化，
  * 修复了部分触发器元素会错误地报告Wrong Index的问题。
  * 『装备-卸下』事件现在可以在装备被别的装备替换下来时正确触发，此外，在装备对比栏里面点击卸下按钮也会触发该事件。
  * 修复了触发器『移动物品』动作的错误。
  * 修复了默认普攻技能模板的公式中冷却时间没有正确受到『施法速度属性影响冷却』勾选项影响的问题。
  * 我们修正了触发编辑器中部分『场景』相关的参数选项的保存问题，若您的地图出现场景选项变为unknown variable的问题，重新选择一次场景并保存应该能避免今后出现类似问题。
  * 修复了调试时若产生了较大数量的日志，拖动条会压缩至不可见的问题
  * 修复了局内商店堆叠数量不为0时无法作为奖励购买的问题
  * 修复了部分情况下无法上传更新模型的问题
  * 修复了地形编辑器中修改物品高度后不自动吸附的问题
  * 修复了数据编辑器预览粒子效果时会影响到调试中表现的问题
  * 修复了移除的装备词条，依然在面板中显示的问题
  * 修复了数编中场景单位、场景坐标等属性在没有指定场景单位和坐标时，尝试读取属性值会报错而非返回空值的问题。
  * 修复了复制触发器属性和方法时可能导致的复制结果指向相同的内容的问题。
  * 修复了触发器拖拽元素时出现的堆栈溢出问题。
  * 修复了蒙版设置重启后失效的问题。
  * 修复了部分情况下技能错误信息没有正常显示的问题。

【修复问题少写点，还有很多，但是写多了你们不看】
![](https://doc.sce.xd.com/assets/images/立绘-6110aa563046642368309ca1c519fd67.webp)

[上一页2023年4月19日星火编辑器更新日志](/Manual/NewPathNote/2023PathNote/2023-04-19)[下一页2023年6月19日星火编辑器更新日志](/Manual/NewPathNote/2023PathNote/2023-06-19)


