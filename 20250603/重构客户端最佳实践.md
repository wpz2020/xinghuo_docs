  * [](/)
  * 触发编辑器
  * 进阶功能
  * 重构客户端最佳实践

复制链接

本页总览

# 重构客户端最佳实践

要重新设计客户端的状态管理，需要采用一些最佳实践，在处理断线重连的情况下，应该侧重于使用服务器和客户端之间的**属性同步**
机制，而不是依赖于消息传递。这是因为消息在客户端刚连接时容易丢失，而属性同步则提供了更可靠的数据恢复机制。

### 1\.
重点利用单位属性和玩家属性[​](/Manual/TriggerEditor/Advanced/RefactorClient#1-重点利用单位属性和玩家属性
"1. 重点利用单位属性和玩家属性的直接链接")

  * **单位属性** : 这些数据是保存在服务器端上的。这些属性在客户端重连时可以通过属性同步方式进行自动同步，确保客户端获得的是最新的状态。
  * **玩家属性** : 包括金钱、击杀数、死亡次数、助攻数等，这些也应通过属性同步来维持最新状态。
  * 优先使用属性同步而不是消息传递，以减少因网络不稳定导致的数据丢失风险。

### 2\.
要避免过度依赖实时消息传递[​](/Manual/TriggerEditor/Advanced/RefactorClient#2-要避免过度依赖实时消息传递
"2. 要避免过度依赖实时消息传递的直接链接")

  * 虽然消息传递在游戏中发挥着重要的交互作用，但它们不应作为维护游戏关键状态的主要手段，特别是在处理断线重连时。
  * 客户端在重新连接时可能会丢失服务端发送的消息。为了避免这种情况，应该将需要持续维护的状态信息保存在单位或玩家属性中。这样，在客户端重连时，这些属性会自动同步，从而保证客户端状态的一致性和完整性。

总之，最佳实践包括使用玩家属性和单位属性来保存关键状态，实现属性同步机制，。这些措施将有助于确保客户端在连接断开和重连时能够维持游戏状态的一致性。
采用这些最佳实践不仅可以提高游戏的稳定性和可玩性，还可以确保在网络环境变化或客户端断线重连的情况下，玩家的游戏体验不受太大影响。

[上一页自定义事件](/Manual/TriggerEditor/Advanced/CustomEvent)[下一页服务端和客户端介绍及通讯原理](/Manual/TriggerEditor/Advanced/ServerAndClient)


