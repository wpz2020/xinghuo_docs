  * [](/)
  * 更新日志
  * 2023年更新日志汇总
  * 2023年4月6日星火编辑器更新日志

复制链接

本页总览

# 2023年4月6日星火编辑器更新日志

### 优化编辑器功能：[​](/Manual/NewPathNote/2023PathNote/2023-04-06#优化编辑器功能
"优化编辑器功能：的直接链接")

  * 『新版触发器』触发器自定义事件支持数值型数组、字符串型数组、点类型数据了

  * 『新版触发器』搜索的检索范围扩大，更容易通过搜索找到想要的语句了

  * 『新版触发器』增加获取服务器时间和处理时间格式的相关语句，旧版触发器可以用os.time获取：

    * 我们在新版触发器中加入了“当前系统日期时间”函数，它会返回一个 “日期时间”对象，用户可从中取得当前的年、月、日、时、分、秒、星期等等信息。
    * 此外，为了方便云变量保存和数值比较，我们还加入了『当前系统时间（整数）』函数，该函数会返回一个代表当前日期时间的整数。并可允许将这一整数值转换为上面的具体“日期时间”对象。
    * 我们认为获取系统日期时间的API对许多游戏的外部成长性功能的实现将很有帮助。
  * 『新版触发器』新增输入聊天信息事件，可以获得输入的信息和玩家

  * 『新版触发器』Switch-Case语句增加了对Default的支持

  * 『新版触发器』现在所有的对象类型在进行比较操作时都可以选到undefined（空值）进行比较。此前只有设置为『可为空』的值才可直接与空值进行比较

  * 『新版触发器』客户端的点对象现在允许获取其X和Y坐标以及高度坐标了

  * 『新版触发器』现在允许Shift多选（Ctrl多选此前已经被支持了）

  * 『新版触发器』现在左侧列表中允许通过右键菜单进行原地复制粘贴（Ctrl+C Ctrl+V的快捷键支持将在之后的更新中加入）

  * 『新版触发器』触发器+数编内容自动备份功能：

    * 使用新版触发器的地图现在会在每次保存时将上一版本的备份保存到编辑器目录的User\Backup\地图名_xxx目录下，最多会保存最近6个版本；注意这里保存的文件只涵盖服务端触发、客户端触发、数据编辑器内容，并不包含游戏项目的其他资源；在需要还原为完整项目时，需要自己搭配原项目进行还原。
  * 『新版触发器』客户端的屏幕坐标现在可转换为界面编辑器UI系统坐标

  * 『新版触发器』现在可获得单位身上所有指定的Buff实例

  * 『新版触发器』现在可以在服务端和客户端获得指定玩家的昵称

  * 『新版触发器』现在客户端触发器允许通过XYZ参数来构造一个点对象。

  * 『新版触发器』现在Buff对象可通过面向对象来获得它自身的效果节点。可通过该效果节点来获取Buff的施法者以及相关的效果树信息。

  * 『新版触发器』增加了一系列奖励相关事件：奖励-获得单位，奖励-获得物品，奖励-获得技能，奖励-获得Buff。这些事件会在玩家获得相关奖励时触发，并可通过事件参数获得对应的奖励对象。奖励事件会在多种场合下引发，单位的死亡掉落、N选1模板的选择、商店系统的购买都会引发奖励。

  * 『新版触发器』新建函数时，返回类型默认为Void而非未定义

  * 『界面编辑器』界面编辑器的控件新增『任意字符串』字段，此字段可以在控件事件中获取，可以利用此字段来实现多个控件的同一逻辑控制

  * 『界面编辑器』新增字体：阿里妈妈东方大楷、霞鹜文楷(普通 + 粗体)

  * 『界面编辑器』界面编辑器控件触发事件时，可以正确的获得控件ID了

  * 『服务器机制』对**死亡系统的规范化** ：对死亡系统重新进行了规范化，以解决此前的一系列相关问题：

    * 修复了拥有“死后不删除”模块的单位在死后12秒后依然会被删除的问题。拥有该标记的单位现在可以在死后任意时间后复活（除非中途被手动删除）。数据编辑器中使用了英雄模板的单位默认拥有这一模块。这一模块可在数据编辑器中针对不同单位添加和删除。
    * 在数编中挂接了死亡掉落奖励的单位，不会再因为单位被删除而触发掉落奖励。
    * 在新版触发器中，单位死亡事件增加了死亡类型参数。可以判断单位是普通地被杀死还是因为被直接删除而引发了死亡事件。
  * 『数据编辑器』调整了动画的生成逻辑，降低不做设置情况下手机上丢失动画的概率

  * 『数据编辑器』数据编辑器在报告错误时现在会加上出错节点的显示名称和类型而非仅仅报告节点的内部Id

  * 『数据编辑器』优化了一些旧版触发器地图向新版触发器地图转移数编技能时出现的问题

  * 『数据编辑器』玩家的队伍编号不可为0，在数据编辑器中将玩家的队伍编号设置为0后，现在会在运行时正确报告错误，而非卡住UI

  * 『数据编辑器』现在单位指令效果节点允许在效果树内发布指令以打开/关闭指定的可开关技能。具体可在节点的右侧属性面板中的子指令字段中选择“打开”或“关闭”（默认值为“执行”，用于执行普通的主动技能）

  * 『数据编辑器』Buff排序系统：

    * 用户可能会在处理光环等Buff时遇到这样的问题。施法者A和B拥有同样的技能，会给目标赋予一个增益、减益或者光环效果。但这个技能所提供的Buff数值可能是基于施法者的某个属性决定的。导致A和B所附加的同样Id的Buff实际数值不同。但在游戏设计中，有时候却又只希望同一个目标身上只能拥有一个或者N个相同Buff，有时候我们可能希望总是由加数值更多的Buff留下，有时候我们可能又会希望能设置其它更加自定义的规则。
    * 为了解决此类问题，数据编辑器加入了为同Id的Buff进行排序的功能。当一个Buff在数据编辑器中设置为不允许存在多个实例或者只允许存在N个实例时，可对Buff的不同实例设置优先级排序。具体操作流程与技能的智能施法排序设置相似。用户可对每种Buff设置多条排序规则，这些规则会按从上到下的顺序对不同的Buff实例进行排序。当系统尝试附加多个相同Id的Buff实例时，会依照用户指定的规则对这些实例进行排序，而队列中超出指定存在数量的实例则会被淘汰，留下用户设置的更高优先级的Buff实例。
    * 在默认情况下，默认的排序规则依次为：
      * Buff等级较高的优先
      * 英雄赋予的Buff优先
      * 剩余持续时间较长的优先
      * 用户现在能在数据编辑器中针对不同Buff添加不同的排序规则，也允许创建完全自定义的规则条目。
  * 『数据编辑器』数据编辑器中的『任意数据』已支持：**布尔、BUFF、场景、场景预制单位、场景预制点、场景预制区域、场景预制物品、场景预制线、单位、单位分类、技能、数值、物品、物品分类、效果、字符串、属性列表** ；并且相关数据类型均已支持2维数组（右侧面板勾选）

### 社区生态支持：[​](/Manual/NewPathNote/2023PathNote/2023-04-06#社区生态支持
"社区生态支持：的直接链接")

  * 上传了约**700个** 免费的物品装备图标，我们还会持续丰富星火编辑器中的免费共享美术资源，想要利用贡献度定制美术资源的开发者可以联系运营喵沟通需求~
  * 『新版触发器』的教程案例已经增加到了[十三个](https://doc.sce.xd.com/%E5%8A%9F%E8%83%BD%E6%89%8B%E5%86%8C/%E8%A7%A6%E5%8F%91%E7%BC%96%E8%BE%91%E5%99%A8/%E6%96%B0%E7%89%88%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88V2%EF%BC%89/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%80%E5%8D%95%E8%A7%A6%E5%8F%91%E8%AF%AD%E5%8F%A5%E7%A4%BA%E4%BE%8B/%E7%A4%BA%E4%BE%8B1%EF%BC%9A%E6%8C%89%E4%B8%8BF1%EF%BC%8C%E8%BE%93%E5%87%BA%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97)，并且还在持续增加，欢迎新人尝试学习。
  * 星火编辑器团队整理了[2023年工作计划](https://doc.sce.xd.com/%E5%8A%9F%E8%83%BD%E6%89%8B%E5%86%8C/%E8%A7%A6%E5%8F%91%E7%BC%96%E8%BE%91%E5%99%A8/%E6%96%B0%E7%89%88%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88V2%EF%BC%89/%E6%9C%80%E5%B8%B8%E7%94%A8%E7%9A%84%E7%AE%80%E5%8D%95%E8%A7%A6%E5%8F%91%E8%AF%AD%E5%8F%A5%E7%A4%BA%E4%BE%8B/%E7%A4%BA%E4%BE%8B1%EF%BC%9A%E6%8C%89%E4%B8%8BF1%EF%BC%8C%E8%BE%93%E5%87%BA%E8%B0%83%E8%AF%95%E6%97%A5%E5%BF%97)，方便大家了解我们的近期规划

### 修复编辑器问题：[​](/Manual/NewPathNote/2023PathNote/2023-04-06#修复编辑器问题
"修复编辑器问题：的直接链接")

  * 『服务器机制』修复了单位标记为『死亡不移除』后相关逻辑无效的问题
  * 『服务器机制』修复了一些内存泄露问题，优化了单位内存分配的逻辑
  * 『服务器机制』单位如果是已死亡、可移除、但是未触发回收，则不再计入统计单位数量
  * 『界面编辑器』修复了界面编辑器控件触发事件时控件ID不可用的问题
  * 『界面编辑器』修复了偶现的鼠标&触控位置和实际位置计算存在差异的问题
  * 『界面编辑器』修正了部分UI类型之间拥有继承关系的字段名称不一致的问题
  * 『地形编辑器』修复了调整地形大小时偶现的Crash问题
  * 『编辑器其他』修复了PIE调试模式下，偶现的切换窗口导致画面表现异常的问题
  * 『数据编辑器』修复了自定义属性时，额外的子属性类型值没有正确地被保存和读取的问题。
  * 『数据编辑器』修复了额外的子属性类型在物品栏系统中的显示格式问题
  * 『数据编辑器』修复了数据编辑器中模型与粒子表现节点挂接到延迟效果节点后不会自动出现“基于素材自动缩放”选项的问题。
  * 『新版触发器』修复了屏幕坐标只能获得其Y坐标却无法获得其X坐标的问题。
  * 『新版触发器』修复了新版触发器『获取物品信息』函数的问题。（面向过程版本失效，面向对象版本有一个多余的参数）
  * 『新版触发器』修复了类的静态属性的显示『新版触发器』修复了次幂运算错误的问题

【修复问题少写点，还有很多，但是写多了你们不看】

**游戏问题** ：修复了大厅匹配时偶现错误7的对应问题游戏内的设置会正常显示玩家昵称和ID了

[上一页2025 年 3 月 12 日更新日志【12
版本】](/Manual/NewPathNote/2024PathNote/2025-3-12)[下一页2023年4月19日星火编辑器更新日志](/Manual/NewPathNote/2023PathNote/2023-04-19)


